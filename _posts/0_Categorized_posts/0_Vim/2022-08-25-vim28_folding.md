---
title: vim 28 - Folding
category: vim
tags: vim folding unfolding vi
---

## vim 28 - Folding

- Vim에서 indentation block을 folding기 위한 방법을 설정합니다.
- 일단 저는 [vim - fandom - wiki - Folding](https://vim.fandom.com/wiki/Folding)를 참고하여 다음으로 정의하였습니다.

```sh
"=============================================================
" 2022.08.24 - sng_hn.lee - Add Foldable
set foldenable
set foldlevelstart=10
set foldnestmax=10
nnoremap <space> za
set foldmethod=indent
"=============================================================
```

### folding by indentation

- `set foldmethod=indent`는 indent(들여쓰기) 레벨에 맞춰서 folding하도록 설정하는 것을 의미합니다.
  - `manual`: 사용자가 직접 입력해서 folding하는 방법을 의미합니다.
  - `syntax`: 일단은 사용하는 언어의 특성에 맞춰서 folding해주는 것으로 보이기는 하는데요, 몇 가지 설정을 추가해 줘야하는 것으로 보입니다.
  - `indent`: 들여쓰기에 기반해서 folding 하는 방법으로 보입니다.
- 저는 일단 주 언어가 python이라서 indentation에 기반하여 folding하는 것으로 충분하여, 일단은 `indent`로 설정합니다.

### toggle folding

- 아래 외에도 몇 가지 더 기능이 있지만, 아래면 충분한 것 같아요.
  - `za`: 현재 커서가 속한 부분 folding on or off(toggle)
  - `zM`: 모두 fold
  - `zR`: 모두 unfold
- `nnoremap`와 `noremap` 모두 "no recursive mapping"을 의미합니다. 다만, `nnoremap`은 only normal mode에서만 작동하는 반면, `noremap`은 normal, visual mode 등 not insert mode에서 모두 동작하는 것으로 보입니다.
- 따라서, 자주 사용하는 space key에 toggle key를 mapping해서 아래와 같이 정의해줍니다.

```sh
nnoremap <space> za
```

### foldlevelstart

- vim으로 file을 열었을 때, 어느 정도의 depth(level)까지 unfold되어 있어야 하는지를 설정해줍니다.
- 만약 `foldlevelstart`를 3으로 설정한 다면, 해당 file 내에 level 3 까지만 보여지고 나머지는 접어져서 나오는 것으로 보입니다.

```sh
set foldlevelstart=10
```

### foldnestmax

- folding 할 때, nested 된 folding 중 최대 몇 개까지 표시할 것인지를 의미하는데요. 이렇게 쓰고 나니, 이해가 어려우시겠군요.
- 가령 `foldlevelstart`이 10으로 설정되어 있고, 현재 커서가 nested 15 Level에 위치해 있다면, 이 때 toggle 키를 눌러서 folding할 경우 10 level 까지만 보여지고 나머지는 보여지지 않습니다.

```sh
set foldlevelstart=10
```

## Wrap-up

- vim으로 긴 코드를 작성할 때, 위아래 이동한다고 꽤 긴 시간이 소요되었는데요, folding toggle을 사용해서 편하게 코드를 스캔할 수 있을 것 같네요.

## Reference

- [velog - vim-foldin](https://velog.io/@ggg/vim-folding)
- [vim - fandom - wiki - Folding](https://vim.fandom.com/wiki/Folding)
- [vimfromscratch - vim folding](https://www.vimfromscratch.com/articles/vim-folding)
